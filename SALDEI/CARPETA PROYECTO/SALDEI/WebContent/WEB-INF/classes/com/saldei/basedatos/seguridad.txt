CREATE SCHEMA SEGURIDAD;
--DROP TABLE SEGURIDAD.OPCION;
CREATE TABLE SEGURIDAD.OPCION (
  ID_OPCION 	     SERIAL       Not Null,
  ID_OPCION_PADRE    INTEGER,   
  NOM_OPCION         VARCHAR(50)  Not Null,          
  DESC_OPCION        VARCHAR(200), 
  URL_OPCION         VARCHAR(100) Not Null,             
  ORDEN              NUMERIC(5)   Not Null,
  METODO             VARCHAR(25),
  IS_SEPARADOR       VARCHAR(1) DEFAULT 'N'  Not Null,              
  EST_OPCION         VARCHAR(1) DEFAULT 'A'  Not Null
  );
    
COMMENT ON TABLE SEGURIDAD.OPCION
IS 'OPCIONES DEL SISTEMA';

COMMENT ON COLUMN SEGURIDAD.OPCION.ID_OPCION
	IS 'IDENTIFICADOR DE LA OPCION';
COMMENT ON COLUMN SEGURIDAD.OPCION.ID_OPCION_PADRE
	IS 'IDENTIFICADOR DE LA OPCION QUE ES PADRE EN EL SISTEMA';
COMMENT ON COLUMN SEGURIDAD.OPCION.NOM_OPCION
	IS 'NOMBRE DE LA OPCION';
COMMENT ON COLUMN SEGURIDAD.OPCION.DESC_OPCION 
	IS 'BREVE DESCRIPICION DE LA OPCION';
COMMENT ON COLUMN SEGURIDAD.OPCION.URL_OPCION
	IS 'DESCRIPCION URL DENTRO DE LA APLICACION';
COMMENT ON COLUMN SEGURIDAD.OPCION.ORDEN
	IS 'ORDEN EN EL QUE SE DESPLEGARAN LOS HIJOS DE UNA OPCION';
COMMENT ON COLUMN SEGURIDAD.OPCION.METODO
	IS 'METODO CON EL QUE SE INICIA LA PANTALLA EN STRUTS';
COMMENT ON COLUMN SEGURIDAD.OPCION.IS_SEPARADOR
	IS 'INDICA SI LA OPCION ES UN SEPARADOR N\S';
COMMENT ON COLUMN SEGURIDAD.OPCION.EST_OPCION
	IS 'ESTADO DE LA OPCION';
    
--DROP TABLE SEGURIDAD.PERFIL;    
CREATE TABLE SEGURIDAD.PERFIL (
  ID_PERFIL 	     SERIAL        NOT NULL,
  NOM_PERFIL         VARCHAR(50)   NOT NULL,          
  DESC_PERFIL        VARCHAR(200),      
  EST_PERFIL         VARCHAR(1)    DEFAULT 'A' NOT NULL
   ) ;
   
COMMENT ON TABLE SEGURIDAD.PERFIL
IS 'PERFILES PARA EL SISTEMA';

COMMENT ON COLUMN SEGURIDAD.PERFIL.ID_PERFIL
	IS 'IDENTIFICADOR DE PERFIL';
COMMENT ON COLUMN SEGURIDAD.PERFIL.NOM_PERFIL
	IS 'NOMBRE DEL PERFIL';
COMMENT ON COLUMN SEGURIDAD.PERFIL.DESC_PERFIL 
	IS 'BREVE DESCRIPICION DEL PERFIL';
COMMENT ON COLUMN SEGURIDAD.PERFIL.EST_PERFIL
	IS 'ESTADO QUE SE ENCUENTRA EL PERFIL';  
      
    
--DROP TABLE SEGURIDAD.USUARIO;
CREATE TABLE SEGURIDAD.USUARIO (
  ID_USUARIO 	     VARCHAR(15)  NOT NULL,
  PSW_USUARIO        VARCHAR(50)  NOT NULL,
  PRIMER_NOM         VARCHAR(15)  NOT NULL,                     
  PRIMER_APE         VARCHAR(15)  NOT NULL,          
  NOMBRE_RESTANTE    VARCHAR(25),      
  APELLIDO_RESTANTE  VARCHAR(25),
  FECHA_NAC          DATE,
  SEXO               VARCHAR(1)  DEFAULT 'M' NOT NULL,
  ESTADO_CIVIL       INTEGER     NOT NULL ,  
  DIRECCION_PART     VARCHAR(200),
  EMAIL              VARCHAR(75)  NOT NULL,
  TELEFONO_CASA      VARCHAR(10),
  TELEFONO_CEL       VARCHAR(10),
  TELEFONO_TRABAJO   VARCHAR(10), 
  FECHA_SOLICITUD    DATE,
  FECHA_RESOLUCION   DATE,
  INI_VIGENCIA       DATE,
  FIN_VIGENCIA       DATE,
  AUTORIZADO_POR     VARCHAR(15),
  EST_USUARIO        VARCHAR(1) DEFAULT 'I' NOT NULL
  );

COMMENT ON TABLE SEGURIDAD.USUARIO
IS 'USUARIOS DEL SISTEMA';

COMMENT ON COLUMN SEGURIDAD.USUARIO.ID_USUARIO
	IS 'IDENTIFICADOR DE USUARIO';
COMMENT ON COLUMN SEGURIDAD.USUARIO.PSW_USUARIO
	IS 'PASSWORD DE EL USUARIO PARA ENTRAR AL SISTEMA';
COMMENT ON COLUMN SEGURIDAD.USUARIO.PRIMER_NOM 
	IS 'PRIMER NOMBRE DEL USUARIO';
COMMENT ON COLUMN SEGURIDAD.USUARIO.PRIMER_APE
	IS 'PRIMER APELLIDO DEL USUARIO';
COMMENT ON COLUMN SEGURIDAD.USUARIO.NOMBRE_RESTANTE 
	IS 'NOMBRES RESTANTES DE USR';
COMMENT ON COLUMN SEGURIDAD.USUARIO.APELLIDO_RESTANTE
	IS 'APELLIDOS RESTANTES DEL USUARIO';       
COMMENT ON COLUMN SEGURIDAD.USUARIO.FECHA_NAC
	IS 'FECHA DE NACIMIENTO';
COMMENT ON COLUMN SEGURIDAD.USUARIO.SEXO
IS 'SEXO DEL ESTUDIANTE, M=MASCULINO, F=FEMENINO';
COMMENT ON COLUMN SEGURIDAD.USUARIO.ESTADO_CIVIL
IS 'CODIGO DEL ESTADO CIVIL';
COMMENT ON COLUMN SEGURIDAD.USUARIO.DIRECCION_PART
	IS 'DIRECCION PARTICULAR DEL USUARIO';       
COMMENT ON COLUMN SEGURIDAD.USUARIO.EMAIL
	IS 'CORREO ELECTRONICO DEL USUARIO';
COMMENT ON COLUMN SEGURIDAD.USUARIO.TELEFONO_CASA 
	IS 'TELEFONO DE CASA';
COMMENT ON COLUMN SEGURIDAD.USUARIO.TELEFONO_CEL 
	IS 'TELEFONO CELULAR';
COMMENT ON COLUMN SEGURIDAD.USUARIO.TELEFONO_TRABAJO
	IS 'TELEFONO DE TRABAJO';
COMMENT ON COLUMN SEGURIDAD.USUARIO.FECHA_SOLICITUD
	IS 'FECHA DE SOLICITUD DE CREACION DE USR';
COMMENT ON COLUMN SEGURIDAD.USUARIO.FECHA_RESOLUCION
	IS 'FECHA DE RESOLUCION DE SOLICITUD DE USR';
COMMENT ON COLUMN SEGURIDAD.USUARIO.INI_VIGENCIA
	IS 'FECHA DE INICIO DE VIGENCIA';   
COMMENT ON COLUMN SEGURIDAD.USUARIO.FIN_VIGENCIA
	IS 'FECHA DE FINALIZACION DE VIGENCIA';        
COMMENT ON COLUMN SEGURIDAD.USUARIO.AUTORIZADO_POR
	IS 'USUARIO QUE AUTORIZO LA SOLICITUD DE USUARIO';    
COMMENT ON COLUMN SEGURIDAD.USUARIO.EST_USUARIO
	IS 'ESTADO DE USUARIO';
    

-- DROP TABLE SEGURIDAD.USUARIO_DEI
CREATE TABLE SEGURIDAD.USUARIO_DEI(
  ID_USUARIO         VARCHAR(15) NOT NULL,
  CODIGO_EMPLEADO    VARCHAR(10) NOT NULL,
  EXTENSION_UCA      VARCHAR(10) 
  ) ;
  
COMMENT ON TABLE SEGURIDAD.USUARIO_DEI
IS 'INFORMACION DE LOS USUARIOS DEL DEPARTAMENTO EN EL SISTEMA';

COMMENT ON COLUMN SEGURIDAD.USUARIO_DEI.ID_USUARIO
	IS 'IDENTIFICADOR DE  USUARIO';
COMMENT ON COLUMN SEGURIDAD.USUARIO_DEI.CODIGO_EMPLEADO
	IS 'CODIGO DE EMPLEADO UCA';
COMMENT ON COLUMN SEGURIDAD.USUARIO_DEI.EXTENSION_UCA
	IS 'EXTENSION TELEFONICA DE LA UNIVERSIDAD';

-- DROP TABLE SEGURIDAD.USUARIO_EXTERNO
CREATE TABLE SEGURIDAD.USUARIO_EXTERNO(
  ID_USUARIO         VARCHAR(15)  NOT NULL,
  SOLICITADO         VARCHAR(25),   
  COMENTARIO         VARCHAR(200)
  ) ;
  
COMMENT ON TABLE SEGURIDAD.USUARIO_EXTERNO
IS 'INFORMACION DE LOS USUARIOS EXTERNOS DEL DEI';

COMMENT ON COLUMN SEGURIDAD.USUARIO_EXTERNO.ID_USUARIO
	IS 'IDENTIFICADOR DE  USUARIO';
COMMENT ON COLUMN SEGURIDAD.USUARIO_EXTERNO.SOLICITADO
	IS 'PERSONA QUIEN SOLICITO PERMISO AL USUARIO EXTERNO';
COMMENT ON COLUMN SEGURIDAD.USUARIO_EXTERNO.COMENTARIO
	IS 'COMENTARIO GENERAL PARA EL USUARIO EXTERNO';

--DROP TABLE SEGURIDAD.USUARIO_PERFIL;
CREATE TABLE SEGURIDAD.USUARIO_PERFIL (
  ID_USUARIO 	     VARCHAR(15)  NOT NULL,
  ID_PERFIL          INT          NOT NULL
) ;

COMMENT ON TABLE SEGURIDAD.USUARIO_PERFIL
IS 'USUARIOS POR PERFIL';

COMMENT ON COLUMN SEGURIDAD.USUARIO_PERFIL.ID_USUARIO
	IS 'IDENTIFICADOR DE USUARIO';
COMMENT ON COLUMN SEGURIDAD.USUARIO_PERFIL.ID_PERFIL
	IS 'IDENTIFICADOR DE PERFIL';


--DROP TABLE SEGURIDAD.OPCION_PERFIL;
CREATE TABLE SEGURIDAD.OPCION_PERFIL (
  ID_OPCION 	     INT          NOT NULL,
  ID_PERFIL          INT          NOT NULL
  );
  
COMMENT ON TABLE SEGURIDAD.OPCION_PERFIL
IS 'OPCIONES POR PERFIL';

COMMENT ON COLUMN SEGURIDAD.OPCION_PERFIL.ID_OPCION
	IS 'IDENTIFICADOR DE OPCION';
COMMENT ON COLUMN SEGURIDAD.OPCION_PERFIL.ID_PERFIL
	IS 'IDENTIFICADOR DE PERFIL';
         
-- DROP TABLE SEGURIDAD.CARGO_USUARIO_DEI;
CREATE TABLE SEGURIDAD.CARGO_USUARIO_DEI (
  ID_USUARIO    VARCHAR(15)  NOT NULL,
  ID_CARGO      INT          NOT NULL,
  EST_CARGO_DEI VARCHAR(1) DEFAULT 'A'  NOT NULL
) ;

COMMENT ON TABLE SEGURIDAD.CARGO_USUARIO_DEI
IS 'CARGO QUE POSEE UN USUARIO DEL DEI';

COMMENT ON COLUMN SEGURIDAD.CARGO_USUARIO_DEI.ID_USUARIO
	IS 'USUARIO DEI QUE POSEE EL CARGO';
COMMENT ON COLUMN SEGURIDAD.CARGO_USUARIO_DEI.ID_CARGO
	IS 'CARGO QUE EJERCE EL USUARIO';
COMMENT ON COLUMN SEGURIDAD.CARGO_USUARIO_DEI.ID_CARGO
	IS 'CARGO QUE EJERCE EL USUARIO';
COMMENT ON COLUMN SEGURIDAD.CARGO_USUARIO_DEI.EST_CARGO_DEI
	IS 'ESTADO DEL CARGO DEL DEI';

    
--DROP TABLE SEGURIDAD.AUDITORIA;
CREATE TABLE SEGURIDAD.AUDITORIA (
  ID_USUARIO 	     VARCHAR(15) NOT NULL,
  FECHA_ACCION       DATE        NOT NULL, 
  NOM_TABLA          VARCHAR(25) NOT NULL,
  ACCION             VARCHAR(10) NOT NULL,
  LLAVE_PRIMARIA     VARCHAR(25) NOT NULL
  );

COMMENT ON TABLE SEGURIDAD.AUDITORIA
IS 'MANEJA LAS ACCIONES REALIZADAS EN LAS TABLAS';

COMMENT ON COLUMN SEGURIDAD.AUDITORIA.ID_USUARIO
	IS 'USUARIO QUE EJECUTO UN CAMBIO';
COMMENT ON COLUMN SEGURIDAD.AUDITORIA.FECHA_ACCION
	IS 'FECHA DE EJECUCION DE CAMBIO';
COMMENT ON COLUMN SEGURIDAD.AUDITORIA.NOM_TABLA
	IS 'NOMBRE DE LA TABLA';
COMMENT ON COLUMN SEGURIDAD.AUDITORIA.ACCION 
	IS 'ACCION REALIZADA I = INSERT U = UPDATE D = DELETE ';
COMMENT ON COLUMN SEGURIDAD.AUDITORIA.LLAVE_PRIMARIA
	IS 'IDENTIFICADOR DEL SEGURIDAD CAMBIADO';
   