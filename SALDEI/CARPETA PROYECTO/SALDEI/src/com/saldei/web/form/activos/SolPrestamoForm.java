/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.saldei.web.form.activos;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.ResourceBundle;
import java.util.Set;

import javax.servlet.http.HttpServletRequest;

import org.apache.struts.action.ActionError;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionMapping;

import com.saldei.hibernate.tables.activos.ActDetSolicitud;
import com.saldei.hibernate.tables.activos.ActDetSolicitudDAO;
import com.saldei.hibernate.tables.activos.ActDetSolicitudId;
import com.saldei.hibernate.tables.activos.ActProveedor;
import com.saldei.hibernate.tables.activos.ActSolicitud;
import com.saldei.hibernate.tables.activos.ActSolicitudId;
import com.saldei.hibernate.tables.activos.ActTipoUnidad;
import com.saldei.hibernate.tables.activos.ActUnidad;
import com.saldei.hibernate.tables.inventario.InvCategoria;
import com.saldei.hibernate.tables.inventario.InvSubCategoria;
import com.saldei.hibernate.tables.inventario.InvSubCategoriaId;

/** 
 * MyEclipse Struts
 * Creation date: 06-08-2009
 * 
 * XDoclet definition:
 * @struts.form name="solPrestamoForm"
 */
public class SolPrestamoForm extends ActionForm {
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	ActSolicitud actSolicitud = new ActSolicitud(new ActSolicitudId(),new ActUnidad());
	//SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd");
	SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
	private String solicitante;
	private String descripcion;
	private String propietario;
	private String estadoNombre;
	private String fecha_creacion;
	private String resolucion;
	private String registroModificable;
	
		

	/**
	 * @return the resolucion
	 */
	public String getResolucion() {
		return resolucion;
	}

	/**
	 * @param resolucion the resolucion to set
	 */
	public void setResolucion(String resolucion) {
		this.resolucion = resolucion;
	}

	public void reset(ActionMapping mapping, HttpServletRequest request) {
		// TODO Auto-generated method stub
		this.actSolicitud = new ActSolicitud(new ActSolicitudId(),new ActUnidad());
		
	this.propietario="";
	this.setComentario("");
	this.setResolucion("");
	}
	
	public void validate(ActionMapping mapping,
			HttpServletRequest request, ActionErrors errors) {
		// TODO Auto-generated method stub
		String accion = request.getParameter("accion");
		accion = (accion==null)?"":accion;
		Date hoy = new Date();
		ResourceBundle mensajes = ResourceBundle.getBundle("com.saldei.web.ApplicationResources");
		if(!accion.equals(mensajes.getString("opc.cancel")) && !accion.equals(mensajes.getString("opc.find"))){
			if(this.getFecha_ini() == null || this.getFecha_ini().trim().equals("")){
				errors.add("prestamo.fechaIni.requerido", new ActionError("prestamo.fechaIni.requerido"));
			}
			
			if(this.getFecha_fin() == null || this.getFecha_fin().trim().equals("")){
				errors.add("prestamo.fechaFin.requerido", new ActionError("prestamo.fechaFin.requerido"));
			}
			if(this.getFechaIniPrestamo()!=null && this.getFechaFinPrestamo()!= null && 
					this.getFechaIniPrestamo().compareTo(this.getFechaFinPrestamo())>0 ){
				errors.add("prestamo.fecha.error", new ActionError("prestamo.fecha.error"));
			}
			
			if(this.getCodPropietario() == null || this.getCodPropietario().trim().equals("")){
				errors.add("prestamo.propietario.requerido", new ActionError("prestamo.propietario.requerido"));
			}
			
			if(this.actSolicitud.getComentario() == null || this.actSolicitud.getComentario().trim().equals("")){
				errors.add("suministro.descripcion.requerido", new ActionError("suministro.descripcion.requerido"));
			}
			
		}				
	}
	
	

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getActUnidad()
	 */
	public ActUnidad getActUnidad() {
		return actSolicitud.getActUnidad();
	}
	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getCodBodega()
	 */
	public String getCodBodega() {
		if (actSolicitud.getCodBodega() != null)
			return String.valueOf(actSolicitud.getCodBodega());
		else return "";			
	}
	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getCodSolicitante()
	 */
	public String getCodSolicitante() {
		return actSolicitud.getCodSolicitante();
	}
	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getEstado()
	 */
	public String getEstado() {
		return actSolicitud.getEstado();
	}
	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getFechaCreacion()
	 */
	public Date getFechaCreacion() {
		return actSolicitud.getFechaCreacion();
	}
	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getFechaFinPrestamo()
	 */
	public Date getFechaFinPrestamo() {
		return actSolicitud.getFechaFinPrestamo();
	}
	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getFechaIniPrestamo()
	 */
	public Date getFechaIniPrestamo() {
		return actSolicitud.getFechaIniPrestamo();
	}
	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getId()
	 */
	public ActSolicitudId getId() {
		return actSolicitud.getId();
	}


	/**
	 * @param actUnidad
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setActUnidad(com.saldei.hibernate.tables.activos.ActUnidad)
	 */
	public void setActUnidad(ActUnidad actUnidad) {
		actSolicitud.setActUnidad(actUnidad);
	}
	/**
	 * @param codBodega
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setCodBodega(java.lang.String)
	 */
	public void setCodBodega(String codBodega) {
		if(codBodega != null  && !codBodega.trim().equals(""))
			actSolicitud.setCodBodega(Integer.valueOf(codBodega));
	}
	/**
	 * @param codSolicitante
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setCodSolicitante(java.lang.String)
	 */
	public void setCodSolicitante(String codSolicitante) {
		actSolicitud.setCodSolicitante(codSolicitante);
	}
	/**
	 * @param estado
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setEstado(java.lang.String)
	 */
	public void setEstado(String estado) {
		actSolicitud.setEstado(estado);
	}
	/**
	 * @param fechaCreacion
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setFechaCreacion(java.util.Date)
	 */
	public void setFechaCreacion(Date fechaCreacion) {
		actSolicitud.setFechaCreacion(fechaCreacion);
	}
	/**
	 * @param fechaFinPrestamo
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setFechaFinPrestamo(java.util.Date)
	 */
	public void setFechaFinPrestamo(Date fechaFinPrestamo) {
		actSolicitud.setFechaFinPrestamo(fechaFinPrestamo);
	}
	/**
	 * @param fechaIniPrestamo
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setFechaIniPrestamo(java.util.Date)
	 */
	public void setFechaIniPrestamo(Date fechaIniPrestamo) {
		actSolicitud.setFechaIniPrestamo(fechaIniPrestamo);
	}
	/**
	 * @param id
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setId(com.saldei.hibernate.tables.activos.ActSolicitudId)
	 */
	public void setId(ActSolicitudId id) {
		actSolicitud.setId(id);
	}

	/**
	 * @return the actSolicitud
	 */
	public ActSolicitud getActSolicitud() {
		return actSolicitud;
	}
	/**
	 * @param actSolicitud the actSolicitud to set
	 */
	public void setActSolicitud(ActSolicitud actSolicitud) {
		this.actSolicitud = actSolicitud;
	}


	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActUnidad#getCodResponsable()
	 */
	public String getCodResponsable() {
		return actSolicitud.getActUnidad().getCodResponsable();
	}


	/**
	 * @return 
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActUnidad#getCodUnidad()
	 */

	public Integer getCodUnidad() {
		return actSolicitud.getActUnidad().getCodUnidad();
	}

	/**
	 * @param codResponsable
	 * @see com.saldei.hibernate.tables.activos.AbstractActUnidad#setCodResponsable(java.lang.String)
	 */
	public void setCodResponsable(String codResponsable) {
		actSolicitud.getActUnidad().setCodResponsable(codResponsable);
	}


	/**
	 * @param codUnidad
	 * @see com.saldei.hibernate.tables.activos.AbstractActUnidad#setCodUnidad(java.lang.Integer)
	 */
	public void setCodUnidad(Integer codUnidad) {
		actSolicitud.getActUnidad().setCodUnidad(codUnidad);
	}


	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitudId#getCodSolicitud()
	 */
	public Integer getCodSolicitud() {
		return actSolicitud.getId().getCodSolicitud();
	}


	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitudId#getTipoSolicitud()
	 */
	public String getTipoSolicitud() {
		return actSolicitud.getId().getTipoSolicitud();
	}


	/**
	 * @param codSolicitud
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitudId#setCodSolicitud(java.lang.Integer)
	 */
	public void setCodSolicitud(Integer codSolicitud) {
		actSolicitud.getId().setCodSolicitud(codSolicitud);
	}


	/**
	 * @param tipoSolicitud
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitudId#setTipoSolicitud(java.lang.String)
	 */
	public void setTipoSolicitud(String tipoSolicitud) {
		actSolicitud.getId().setTipoSolicitud(tipoSolicitud);
	}

	/**
	 * @return the fecha_ini
	 */
	public String getFecha_ini() {
		return actSolicitud.getFecha_ini();
	}

	/**
	 * @param fecha_ini the fecha_ini to set
	 */
	public void setFecha_ini(String fecha_ini) throws ParseException{
		actSolicitud.setFecha_ini(fecha_ini);
	}

	/**
	 * @return the fecha_fin
	 */
	public String getFecha_fin() {
		return actSolicitud.getFecha_fin();
	}

	/**
	 * @param fecha_fin the fecha_fin to set
	 */
	public void setFecha_fin(String fecha_fin)throws ParseException  {
		actSolicitud.setFecha_fin(fecha_fin);
	}

	/**
	 * @return the solicitante
	 */
	public String getSolicitante() {
		return solicitante;
	}

	/**
	 * @param solicitante the solicitante to set
	 */
	public void setSolicitante(String solicitante)  {
		this.solicitante = solicitante;
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getActDetSolicituds()
	 */
	public Set getActDetSolicituds() {
		return actSolicitud.getActDetSolicituds();
	}

	/**
	 * @param actDetSolicituds
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setActDetSolicituds(java.util.Set)
	 */
	public void setActDetSolicituds(Set actDetSolicituds) {
		actSolicitud.setActDetSolicituds(actDetSolicituds);
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getCodPropietario()
	 */
	public String getCodPropietario() {
		return actSolicitud.getCodPropietario();
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getComentario()
	 */
	public String getComentario() {
		return actSolicitud.getComentario();
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#getPrestamoLink()
	 */
	public String getPrestamoLink() {
		String link = " <a  href='#' onclick=\"javascript:enviarSolPrestamo('Find','"
			+ this.getId().getCodSolicitud()+ "','"
			+ this.getCodPropietario()+ "','"
			+ this.getEstado()+ "','"
			+ this.getEstadoNombre()+ "','"
			+ this.getPropietario()+ "','"
			+ sdf.format(this.getFechaIniPrestamo())+ "','"
			+ sdf.format(this.getFechaFinPrestamo())+ "','"
			+ this.getComentario()+ "','"
			+ this.getActUnidad().getCodUnidad()+"','"
			+ this.getCodSolicitante()+	"');return false;\" >";
		
	link += " Buscar Recurso</a>";	

return link;
	}

	/**
	 * @param codPropietario
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setCodPropietario(java.lang.String)
	 */
	public void setCodPropietario(String codPropietario) {
		actSolicitud.setCodPropietario(codPropietario);
	}

	/**
	 * @param comentario
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setComentario(java.lang.String)
	 */
	public void setComentario(String comentario) {
		actSolicitud.setComentario(comentario);
	}

	/**
	 * @return the descripcion
	 */
	public String getDescripcion() {
		return descripcion;
	}

	/**
	 * @param descripcion the descripcion to set
	 */
	public void setDescripcion(String descripcion) {
		this.descripcion = descripcion;
	}

	/**
	 * @return the propietario
	 */
	public String getPropietario() {
		return propietario;
	}

	/**
	 * @param propietario the propietario to set
	 */
	public void setPropietario(String propietario) {
		this.propietario = propietario;
	}

	/**
	 * @return the estadoNombre
	 */
	public String getEstadoNombre() {
		return estadoNombre;
	}

	/**
	 * @param estadoNombre the estadoNombre to set
	 */
	public void setEstadoNombre(String estadoNombre) {
		this.estadoNombre = estadoNombre;
	}

	/**
	 * @return the fecha_creacion
	 */
	public String getFecha_creacion() {
		return fecha_creacion;
	}

	/**
	 * @param fecha_creacion the fecha_creacion to set
	 */
	public void setFecha_creacion(String fecha_creacion) {
		this.fecha_creacion = fecha_creacion;
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getFechaAprobacion()
	 */
	public Date getFechaAprobacion() {
		return actSolicitud.getFechaAprobacion();
	}

	/**
	 * @param fechaAprobacion
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setFechaAprobacion(java.util.Date)
	 */
	public void setFechaAprobacion(Date fechaAprobacion) {
		actSolicitud.setFechaAprobacion(fechaAprobacion);
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#getFecha_aprobacion()
	 */
	public String getFecha_aprobacion() {
		return actSolicitud.getFecha_aprobacion();
	}

	/**
	 * @param fecha_aprobacion
	 * @throws ParseException
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#setFecha_aprobacion(java.lang.String)
	 */
	public void setFecha_aprobacion(String fecha_aprobacion)
			throws ParseException {
		actSolicitud.setFecha_aprobacion(fecha_aprobacion);
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#getFecha_finalizacion()
	 */
	public String getFecha_finalizacion() {
		return actSolicitud.getFecha_finalizacion();
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getFechaFinalizacion()
	 */
	public Date getFechaFinalizacion() {
		return actSolicitud.getFechaFinalizacion();
	}

	/**
	 * @param fecha_finalizacion
	 * @throws ParseException
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#setFecha_finalizacion(java.lang.String)
	 */
	public void setFecha_finalizacion(String fecha_finalizacion)
			throws ParseException {
		actSolicitud.setFecha_finalizacion(fecha_finalizacion);
	}

	/**
	 * @param fechaFinalizacion
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setFechaFinalizacion(java.util.Date)
	 */
	public void setFechaFinalizacion(Date fechaFinalizacion) {
		actSolicitud.setFechaFinalizacion(fechaFinalizacion);
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#getFecha_anulacion()
	 */
	public String getFecha_anulacion() {
		return actSolicitud.getFecha_anulacion();
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getFechaAnulacion()
	 */
	public Date getFechaAnulacion() {
		return actSolicitud.getFechaAnulacion();
	}

	/**
	 * @param fecha_anulacion
	 * @throws ParseException
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#setFecha_anulacion(java.lang.String)
	 */
	public void setFecha_anulacion(String fecha_anulacion)
			throws ParseException {
		actSolicitud.setFecha_anulacion(fecha_anulacion);
	}

	/**
	 * @param fechaAnulacion
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setFechaAnulacion(java.util.Date)
	 */
	public void setFechaAnulacion(Date fechaAnulacion) {
		actSolicitud.setFechaAnulacion(fechaAnulacion);
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getMotivoAnulacion()
	 */
	public String getMotivoAnulacion() {
		return actSolicitud.getMotivoAnulacion();
	}

	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#getMotivoRechazo()
	 */
	public String getMotivoRechazo() {
		return actSolicitud.getMotivoRechazo();
	}

	/**
	 * @param motivoAnulacion
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setMotivoAnulacion(java.lang.String)
	 */
	public void setMotivoAnulacion(String motivoAnulacion) {
		actSolicitud.setMotivoAnulacion(motivoAnulacion);
	}

	/**
	 * @param motivoRechazo
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setMotivoRechazo(java.lang.String)
	 */
	public void setMotivoRechazo(String motivoRechazo) {
		actSolicitud.setMotivoRechazo(motivoRechazo);
	}

	public String getRegistroModificable() {
		ActSolicitud actSolicitud = this.getActSolicitud();
		actSolicitud.getId().setTipoSolicitud("P");
		ActDetSolicitud actDetSolicitud = new ActDetSolicitud();
		ActDetSolicitudDAO actDetSolicitudDAO = new ActDetSolicitudDAO();
		actDetSolicitud = actDetSolicitudDAO.findById(new ActDetSolicitudId(this.getActSolicitud(),1));
		return actDetSolicitud==null ? "S" : "N";
	}


	/**
	 * @return
	 * @see com.saldei.hibernate.tables.activos.ActSolicitud#getDesBodega()
	 */
	public String getDesBodega() {
		return actSolicitud.getDesBodega();
	}

	/**
	 * @param codBodega
	 * @see com.saldei.hibernate.tables.activos.AbstractActSolicitud#setCodBodega(java.lang.Integer)
	 */
	public void setCodBodega(Integer codBodega) {
		actSolicitud.setCodBodega(codBodega);
	}


	/**
	 * @param codUnidad the codUnidad to set
	 */
/*	public void setCodUnidad(int codUnidad) {
		this.codUnidad = codUnidad;
	}

	/**
	 * @return the codUnidad
	 */
/*	public int getCodUnidad() {
		return codUnidad;
	}
	
	/*
	 * Generated Methods
	 */
	
}